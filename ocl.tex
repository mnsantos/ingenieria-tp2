\oclInv{Bicicleta}{Pedido.allInstances() $\rightarrow$ forAll(p1 | Pedido.allInstances() $\rightarrow$ forAll(p2 | p1.bicicletas $\rightarrow$ includes(self) $\wedge$ p2.bicicletas $\rightarrow$ includes(self) implies p1.horaSalida != p2.horaSalida))}{No hay una bicicleta que esté en dos pedidos distintos para una misma hora}

~

\oclInv{Bicicleta}{(Bicicleta.allInstances() $\rightarrow$ select(b | b.id = self.id) $\rightarrow$ size() ) = 1}{Los identificadores de las bicicletas son distintos}

~

\oclInv{Usuario}{(Usuario.allInstances() $\rightarrow$ select(u | u.DNI = self.DNI) $\rightarrow$ size() ) = 1}{Los DNI's de los usuarios son distintos}

~

\oclInv{Usuario}{(self.penalizacion() $\rightarrow$ size() = 1) implies (
(self.alquiler $\rightarrow$ size() = 1) implies ((self.alquiler.fecha \ < \ self.penalizacion().fechaEmision $\lor$
self.alquiler.fecha \ > \ self.penalizacion.fechaVencimiento))))}{Si un usuario está penalizado, no puede alquilar bicicletas entre
la fecha de origen de la penalización y la fecha de vencimiento}

~

- No hay estaciones con nombres iguales.

context Estacion

inv: (Estacion.allInstances -> select(e | e.nombre == self.nombre) -> size() ) = 1



- No hay estaciones con direcciones iguales

context Estacion

inv: (Estacion.allInstances -> select(e | e.direccion == self.direccion) -> size() ) = 1
	


- No hay pedidos con una misma estación como origen y destino

context Pedido

inv: self.estacionOrigen != self.estacionDestino



- Hay suficientes bicicletas para albergar cantidad a retirar de la estación origen

context Pedido

inv: ( (self.bicicletas -> size()) < self.estacionOrigen.capacidad )



- Hay suficiente capacidad para albergar la cantidad de bicicletas pedidas en la estación Destino

context Pedido

inv: ( (self.bicicletas -> size()) < self.estacionDestino.capacidad)



- Solo se pueden transportar bicicletas que no estén alquiladas

context Pedido

inv: ( (self.bicicletas -> forAll(b | (b.alquiler -> size() = 1) implies b.alquiler.Hora != self.HoraSalida  ))



- No pueden haber empleados de estación iguales en dos estaciones distintas

context Empleado estación

inv: Estacion.allInstances -> select( e | e -> (includes(self)) ) -> size() = 1



- Las estaciones del centro tienen más capacidad que las de la periferia.(La proporción del doble parece razonable, y es
una decisión propia)

context Estación Centro

inv: (EstacionPeriferia.allInstances() -> forAll(e | e.capacidad*2 <= self.capacidad))








